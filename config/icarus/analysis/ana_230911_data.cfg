analysis:
  iteration: -1
  run_mode: reco
  log_dir: log_trash
  data_builders:
    #- FragmentBuilder
    - ParticleBuilder
    - InteractionBuilder
  convert_to_cm: True
reader:
  name: HDF5Reader
  file_keys: ''
writer:
  name: HDF5Writer
  file_name: icarus_mlreco_output.h5
  merge_groups: False
  input_keys:
    - index
    - meta
    - run_info
  result_keys:
    - input_rescaled
    #- particle_fragments
    #- truth_particle_fragments
    - particles
    #- truth_particles
    - interactions
    #- truth_interactions
post_processing:
  run_flash_matching:
    profile: True
    opflash_keys: ['opflash_cryoE', 'opflash_cryoW']
    volume_boundaries: [[1376.3], None, None]
    ADC_to_MeV: 1./1400. # 1./350.
    fmatch_config: flashmatch_230911.cfg
    priority: 3
  assign_particle_extrema:
    profile: True
    method: local
    priority: 2
  adjust_particle_properties:
    profile: True
    track_pid_thresholds: {4: 0.85, 2: 0.1, 3: 0.0}
    primary_threshold: 0.1
    priority: 2
  reconstruct_directions:
    profile: True
    run_mode: reco
    optimize: True
    #neighborhood_radius: -1
    priority: 1
  reconstruct_calo_energy:
    profile: True
    conversion_factor: 1.0
    priority: 1
  reconstruct_csda_energy:
    profile: True
    run_mode: reco 
    tracking_mode: bin_pca
    segment_length: 5.0
    priority: 1
  reconstruct_momentum:
    profile: True
    method: best
  reconstruct_vertex:
    profile: True
    run_mode: reco
    use_primaries: True
    update_primaries: False
  check_containement:
    profile: True
    run_mode: reco
    detector: icarus
    margin: 5.0
    mode: module
